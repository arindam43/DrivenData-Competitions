# Pover-T Tests: Predicting Poverty
Codebase for my top 1% finish (13th out of 2000+ on final private leaderboard) in DrivenData's Pover-T Tests competition.

This codebase is intended to illustrate the main body of work behind the aforementioned strong finish in the competition. Unfortunately, I did not use git to track model development or ensure result reproducibility at the time of the competition in early 2018. Consequently, when cleaning up the codebase several years later (early 2022), the primary goal was to isolate and share the primary drivers behind the strong results in the competition in an easily understandable format. Therefore, certain aspects of model training (e.g., hyperparameter tuning) are greatly simplified/de-emphasized here. The predictions generated by this codebase were validated against the best predictions submitted during the original competition and found to be reasonably consistent with the original predictions.

The data itself is not included here; it is assumed you have access to the raw source data files provided by DrivenData. All directions provided are for Windows 10. 
  
After setting up the correct file and directory structured (specified below), simply run main.R to generate the test set predictions. They will be saved to the 'predictions' directory as 'predictions YYYY-MM-DD HH.MM.SS.csv'.

## Install Requirements  
The main.R script contains a list of all user-installed packages necessary to run this codebase from end-to-end, and will attempt to install any missing packages it detects. However, in case future releases of these packages break existing functionality, the exact versions of user-installed packages that this codebase was tested with are listed below:
  
| Package  | Version |  
| --- | --- | 
| ALEPlot | 1.1 |  
| caret | 6.0-90 |  
| data.table | 1.14.2 |
| DescTools | 0.99.44 | 
| docstring | 1.0.0 | 
| ggplot2 | 3.3.5 | 
| glue | 1.6.0 | 
| gridExtra | 2.3 | 
| logger | 0.2.2 | 
| MLmetrics | 1.1.1 |      
| xgboost | 1.5.0.2 |  

These are generally the most recent versions of these packages (as of early 2022), so they do not reflect the package versions that were used in the competition itself. Parts of the codebase may be designed to address package limitations that were present at the time of the competition but have been addressed since then (e.g., XGBoost's handling of categorical variables).

This codebase was tested on R 4.1.2 and all associated base packages.

## Directory and File Structure  
  
Directories are indicated in bold.  
  
  * **rinse-over-run**  
    * **data** 
      * country_a_hh_test.csv  
      * country_a_hh_train.csv  
      * country_a_ind_test.csv  
      * country_a_ind_train.csv   
      * country_b_hh_test.csv  
      * country_b_hh_train.csv  
      * country_b_ind_test.csv  
      * country_b_ind_train.csv  
      * country_c_hh_test.csv  
      * country_c_hh_train.csv  
      * country_c_ind_test.csv  
      * country_c_ind_train.csv   
    * **predictions**  
      * *initially empty*  
    * **src**  
      * build_models.R  
      * engineer_features.R  
      * helper_functions.R  
      * main.R  
      * make_predictions.R  
      * process_data.R  
      * read_input_data.R  
      * visualize_insights.R  

## Additional Notes

- The main.R script assumes that getwd() returns the parent directory of this codebase (e.g. C:/.../DrivenData-Competitions/Pover-T Tests). Please add the appropriate setwd() command before running main.R if this is not the case.
- The filenames indicated the previous section do not exactly match those of the raw files from DrivenData's site, so they will need to be updated manually.
- All string data provided for the competition (column names, non-numeric responses to survey questions) were anonymized, which limited the extent to which feature engineering using real-world knowledge was possible.